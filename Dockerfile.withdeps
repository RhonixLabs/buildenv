FROM rchain/buildenv:latest
ARG GIT_URL=https://github.com/rchain/rchain
ARG GIT_REV=dev
RUN git clone $GIT_URL tmpclone && git -C tmpclone checkout $GIT_REV
RUN cd tmpclone && sbt update
RUN cd tmpclone/integration-tests \
    && python -m venv /var/cache/integration-tests-venv \
    && PATH=/var/cache/integration-tests-venv/bin:$PATH pip-install-pipfilelock
RUN rm -rf tmpclone
